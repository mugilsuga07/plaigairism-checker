{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plag Checker | Compare Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500;600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Sansita+Swashed:wght@700&display=swap" rel="stylesheet">
    <link href="{% static 'pc/stylesDocCheck.css' %}" rel="stylesheet" type="text/css">
    <style>
    body{
            background-color: rgb(255, 255, 255);
            color: rgb(0, 0, 0);
          font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif ;
          
        }
    nav{
          background-color:rgb(255, 255, 255);
        }
        .text-content{
      font-size: 20px;
      font-weight: 400;
      text-decoration: none;
    }
    label{
        font-weight: bold;
        float: left;
        margin: 10px;
    }
    .output-per{
    font-size: 35px;
    color: #9584f6;
    padding-top: 43px;
    margin-top: 5px;
    text-align: center;
    width: 155px;
    height: 155px;
    border: 7px solid #4431ad;
    border-radius: 50%
    }

    .plag{
        margin-left: 185px; 
        font-size: 30px;
        color: #ff6536;
        padding-top: 43px;
        margin-top: 5px;
        text-align: center;
        width: 155px;
        height: 155px;
        border: 7px solid #4431ad;
        border-radius: 50%
    }

    .unique{
        margin-left: 185px; 
        font-size: 30px;
        color: #22e6b8;
        padding-top: 43px;
        margin-top: 5px;
        text-align: center;
        width: 155px;
        height: 155px;
        border: 7px solid #4431ad;
        border-radius: 50%
    }
    ul{
        list-style: none;
    }
      
       
    .report-title {
      text-align: center;
      background-color: #6c56e6;
      color: #ffffff;
      margin: 10px;
    }
    
    .input-table {
      border-collapse: collapse;
      width: 100%;
    }
    
    .input-heading {
      color: #000000;
    }
    
    .input-text {
      text-align: justify;
    }
    
    .results-table {
      border-collapse: collapse;
      width: 100%;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 50px;
      text-align: justify;
      padding: 16px;
    }
    
    .results-table th {
      font-weight: bold;
    }
    
    .checked-content {
      /* color: rgb(239, 107, 107); */
      font-size:15px;
      /* text-decoration: underline; */
      text-align: justify;
    }
    
    .matched-sources {
      font-size: 35px;
      text-decoration: underline;
      color: #5874ff;
      padding-top: 43px;
      margin-left: 20px;
      margin-top: 5px;
      text-align: justify;
      width: 150px;
      height: 100px;
      border: 7px solid #4431ad;
      border-radius: 50%;
      list-style: square;
      text-align: justify;
    }
    
    .matched-score {
      font-size: 35px;
      padding-top: 43px;
      margin-left: 20px;
      margin-top: 5px;
      text-align: justify;
      width: 150px;
      height: 100px;
      border: 7px solid #4431ad;
      border-radius: 50%;
      list-style: square;
      text-align: justify;
      text-decoration: underline;
      color: #5874ff;
    }
    
    .plagiarism-summary {
      border: 1px solid black;
      text-align: justify;
      width: 100%;
      background-color: white;
    }
    
    .summary-heading {
      font-family: Arial black, Helvetica, sans-serif;
    }
    
    .summary-percent {
      font-size: 35px;
      color: #9584f6;
      padding-top: 43px;
      margin-left: 175px;
      margin-top: 5px;
      text-align: center;
      width: 155px;
      height: 125px;
      border: 7px solid #4431ad;
      border-radius: 50%;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 50px;
    }


    th,
    td {
      text-align: left;
      padding: 5px;
    }


    tr:nth-child(even) {
      background-color: #f2f2f2
    }


    th {
      background-color: #d6ceff;
      color: rgb(0, 0, 0);
      font-family: arial black;
    }

    .highlight {
    background-color: rgb(236, 62, 62);
    font-weight: bold;
    }

</style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand" style="font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; color:#000000; font-size: 40px; font-weight: bolder;" href="{% url 'plagiarism-check-mainpage' %}"> <i class="bi bi-clipboard-check-fill"></i> Plag Checker</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav" style="margin-left: auto;">
                <li class="nav-item nav-one">
                    <a style="color: #000000; font-weight: bolder; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;" class="nav-link  btn btn-warning" href="{% url 'plagiarism-check-mainpage' %}">Check Plagiarism<span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item nav-two">
                    <a style="color: #000000; font-weight: bolder; font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;" class="nav-link  btn btn-info" href="{% url 'compare' %}">Compare Documents</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container content-1">
        <div class="text-content">
            <h3 style="font-weight: bold;">Choose two files of same type to compare or enter contents to compare!</h3>
            <div class="row">
                <div class="col-md-5 tab-content-2">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="text-tab-2" data-toggle="tab" href="#text-input-dc-1" role="tab"
                                aria-controls="text-input-ws" aria-selected="true">Text</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="text-input-dc-1" role="tabpanel"
                            aria-labelledby="text-tab-2">
                            
                            <form id="form1-ws" action="/twofiletest1/" method="POST">
                                {% csrf_token %}
                         
                                <textarea id="text-in-1" name="q1" placeholder="Copy Paste the Source Text here..." required></textarea><br>
                          
                                <textarea id="text-1" name="q2" placeholder="Copy Paste the Suspicious Text here to check plagiarism ..." required></textarea>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 tab-content-2">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="file-tab-3" data-toggle="tab" href="#file-input-dc-2" role="tab"
                                aria-controls="file-input-ws" aria-selected="true">File Upload</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="file-input-dc-2" role="tabpanel" aria-labelledby="file-tab-3">
                            <form id="form2-ws" action="/twofilecompare1/" enctype="multipart/form-data" method="POST">
                                {% csrf_token %}
                                <label>Upload Source File:</label>
                                <input type="file" class="fileupload" id="fileupload" name="docfile1" required="True">
                                <label>Upload Suspicious File:</label>
                                <input type="file" class="fileupload" id="fileupload" name="docfile2" required="True">
                            </form>
                            <br><hr>
                            <h6 style="font-weight: bold;">Note: Compare files of same type (docx, txt)</h6>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row button-align">
                <button type="submit" form="form1-ws" on id="submit-button-1" class="btn" style="background-color:#6c56e6;">Compare The Texts</button>
                <button type="submit" form="form2-ws" id="submit-button-2" class="btn submit-button-2" style="background-color:#6c56e6;">Compare The Files</button>
            </div>     
        </div>
        <button type="submit" id="report" class="btn" style="background-color:#56b4e6; font-family: Arial, Helvetica, sans-serif ;font-weight: bold; margin: 0 auto; display: flex;justify-content: center;align-items: center;" onclick="scrollToSection('#view-score')">VIEW PLAGIARISM REPORT</button>

         <hr>
        <div id="downloadReport" style="margin: 0 auto;">
            <h2 class="report-title" id="view-score" style="background-color:cornflowerblue; text-align: center;"> PLAG CHECKER <br>
              <span style="color:#000000;">PLAGIARISM ANALYSIS REPORT</span></h2>
            <hr>
          
            <table style="text-align: justify; margin: 0 auto;width: 50%; background-color: white;">  
                <tr style="margin: 0 auto;">                
               
                    <td style="color: #000000; ">
                        <h4 style="font-family: Arial black, Helvetica, sans-serif; text-align: center;">Unique Content</h4>
                        <p class="unique" style="margin: 0 auto;">{{ uniquePercent }}%</p>
                    </td>
      
                    <td style="color: #000000;">
                        <h4 style="font-family: Arial black, Helvetica, sans-serif; text-align: center;">Plagiarized Content</h4>
                      <p class="plag" style="margin: 0 auto;">{{ totalPercent }}%</p>
                    </td>
                    
                </tr>
               
              </table>
          
          <hr>
      
            <table class="results-table" style="font-size: 10px;">
                <tr style="text-align: justify; padding: 5px;" class="checked-content plagiarism-summary">
                    <th>YOUR INPUT 1 (SOURCE TEXT)</th>
                </tr>
                <tr style="text-align: justify; padding: 5px;" class="checked-content plagiarism-summary">
                    <td>
                        <h5 class="input-text">
                            {% for word in wordlist1 %}
                                {% if word in text1 %}
                                    {% if word in wordlist2 %}
                                        <mark style="background-color: #ff8686c3;">{{ word }}</mark>
                                    {% else %}
                                        <mark style="background-color: #90ee90;">{{ word }}</mark>
                                    {% endif %}
                                {% else %}
                                    {{ word }}
                                {% endif %}
                            {% endfor %}
                        </h5>
                    </td>
                </tr>
                <tr style="text-align: justify; padding: 5px;" class="checked-content plagiarism-summary">
                    <th>YOUR INPUT 2 (SUSPICIOUS TEXT)</th>
                </tr>
                <tr style="text-align: justify; padding: 5px;" class="checked-content plagiarism-summary">
                    <td>
                        <h5 class="input-text">
                            {% for word in wordlist2 %}
                                {% if word in text2 %}
                                    {% if word not in wordlist1 %}
                                        <mark style="background-color: #90ee90;">{{ word }}</mark>
                                    {% else %}
                                        <mark style="background-color: #ff8686c3;">{{ word }}</mark>
                                    {% endif %}
                                {% else %}
                                    {{ word }}
                                {% endif %}
                            {% endfor %}
                        </h5>
                    </td>
                </tr>
            </table>
            
            
            
          </div>
        </div>
          </div>
              
            <br>
            <br>
        

       <button type="submit" class="btn btn-primary downloadButton" style="background-color:#56b4e6; font-family: Arial, Helvetica, sans-serif ;font-weight: bold; margin: 0 auto; display: flex; margin-bottom: 20px;
        justify-content: center; align-items: center;" name="download">Download Report</button>
    
    
        <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    
 
            <script>
                function scrollToSection(sectionId) {
                    const section = document.querySelector(sectionId);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            </script>
    <!-- <script>
          var x = document.getElementById("download-Report");
          x.style.display = "none";
    
          var pdffile = "data:text/html," + $('#download-Report').html()
    
          
          $('.downloadButton').on('click', function () {
            $('<a />').attr({
              download: 'Plag_report.html',
              href: pdffile
            })[0].click()
          });
        </script> -->

        
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <script>
    
      $('.downloadButton').on('click', function () {
        // Target the element containing the report content
        var element = document.getElementById("downloadReport");
    
        // Set the options for the PDF generation
        var options = {
          margin: [20, 20, 20, 20],  // Margins (top, left, bottom, right)
          filename: 'Plag_report.pdf',  // File name
          image: { type: 'jpeg', quality: 0.98 },  // Image type and quality
          html2canvas: { scale: 2 },  // Scale factor for better quality
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },  // PDF unit, format, and orientation
          style: `
      body {
      zoom: 40%;
      background-color: #ffffff;
      color: #000000;
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    }
    
    .container {
      margin: 50px auto;
      max-width: 800px;
      text-align: center;
    }
    
    .report-title {
      text-align: center;
      background-color: #6c56e6;
      color: #ffffff;
      margin: 10px;
    }
    
    .input-table {
      border-collapse: collapse;
      width: 100%;
    }
    
    .input-heading {
      color: #000000;
    }
    
    .input-text {
      text-align: justify;
    }
    
    .results-table {
      border-collapse: collapse;
      width: 100%;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 50px;
      text-align: justify;
      padding: 16px;
    }
    
    .results-table th {
      font-weight: bold;
    }
    
    .checked-content {
      color: red;
      text-decoration: underline;
      text-align: justify;
    }
    
    .matched-sources {
      font-size: 35px;
      text-decoration: underline;
      color: #5874ff;
      padding-top: 43px;
      margin-left: 20px;
      margin-top: 5px;
      text-align: justify;
      width: 150px;
      height: 100px;
      border: 7px solid #4431ad;
      border-radius: 50%;
      list-style: square;
      text-align: justify;
    }
    
    .matched-score {
      font-size: 35px;
      padding-top: 43px;
      margin-left: 20px;
      margin-top: 5px;
      text-align: justify;
      width: 150px;
      height: 100px;
      border: 7px solid #4431ad;
      border-radius: 50%;
      list-style: square;
      text-align: justify;
      text-decoration: underline;
      color: #5874ff;
    }
    
    .plagiarism-summary {
      border: 1px solid black;
      text-align: justify;
      width: 100%;
      background-color: white;
    }
    
    .summary-heading {
      font-family: Arial black, Helvetica, sans-serif;
    }
    
    .summary-percent {
      font-size: 35px;
      color: #9584f6;
      padding-top: 43px;
      margin-left: 175px;
      margin-top: 5px;
      text-align: center;
      width: 155px;
      height: 125px;
      border: 7px solid #4431ad;
      border-radius: 50%;
    } `
        };
    
        // Generate the PDF
        html2pdf().set(options).from(element).save();
      });
    </script> 
    </div>
      <footer style="background-color: #000000; color: white; margin: 0 auto; padding: 10px 50px;"
        class="container-fluid d-flex justify-content-between flex-wrap">
        <div><strong>Copyright &copy; 2023.</strong> All rights reserved.</div>
    
    
        <div>Plagiarism Detection Tool by <strong>BSA Crescent University</strong></div>
      </footer>

    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
</body>
</html>